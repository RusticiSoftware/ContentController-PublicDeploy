[Unit]
Description=Content Controller Web Application Container
After=network.target

[Service]
Environment=JAVA_HOME={{ java_home }}
Environment=BINDIR={{ cc_deploy_path }}/bin
Environment="JAVA_OPTS=-Djava.awt.headless=true -Xmx{{ cc_heap_size }} -XX:+UseConcMarkSweepGC"
{% if remote_debugging %}
Environment="CONTENTCONTROLLER_SERVICE_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:8000"
{% endif %}
WorkingDir={{ cc_deploy_path }}/bin
ExecStart={{ cc_deploy_path }}/bin/./contentcontroller-service server {{ cc_deploy_path }}/bin/contentcontroller.yaml
User=tomcat
Group=tomcat

{% if S3FileStorageAwsId is defined and S3FileStorageAwsKey is defined %}
Environment=AWS_ACCESS_KEY_ID="{{ S3FileStorageAwsId }}"
Environment=AWS_SECRET_ACCESS_KEY="{{ S3FileStorageAwsKey }}"
{% endif %}

[Install]
WantedBy=multi-user.target
